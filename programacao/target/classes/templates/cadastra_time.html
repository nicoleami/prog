<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/index.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>CADASTRAR TIMES</title>
</head>

<body class="index">
    <header>
        <h1>cadastrar times</h1>
    </header>

    <form data-form>
        <span>id</span>
        <input type="text" id="id" class="input" placeholder="Id" required />
        <span>nome</span>
        <input id="nome" class="input" type="text" placeholder="Nome" required />
        <span>cidade</span>
        <select class="input" name="cidade" id="cidade">

        </select>
        <span>estado</span>
        <input id="estado" class="input" type="text" placeholder="Estado" required />
        <span>data de fundação</span>
        <input id="fund" class="input" type="text" placeholder="Data de Fundação" required />
        <div id="cadastro">
            <button type="submit" class="btn btn-primary" onclick="criarTime()">cadastrar</button>
        </div>
    </form>

    <a href="times.html"><button class="btn btn-danger">voltar</button></a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>
<script src="../static/js/times.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>

<script>
    const select = document.getElementById('cidade')
    const apiCidade = 'http://localhost:8080/cidades'
    const botaoCadastro = document.getElementById('cadastro')

    fetch(apiCidade).then(
        response => response.json()
    ).then(
        data => {
            if (data.length == 0) {
                botaoCadastro.innerHTML = `<button type="submit" class="btn btn-dark" disabled>Cadastre uma cidade antes</button>`
                select.innerHTML += `
                <option selected>Nenhuma cidade cadastrada</option>
            `
            }
            for (var i = 0; i < data.length; i++) {
                select.innerHTML += `
            <option value="${data[i].nome}">${data[i].nome}</option>
            `
            }
            console.log(data)
        }
    )
</script>